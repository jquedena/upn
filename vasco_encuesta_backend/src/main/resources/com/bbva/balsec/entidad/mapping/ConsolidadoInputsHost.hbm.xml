<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN" "http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">
<!-- Generated 02/12/2016 05:39:15 PM by Hibernate Tools 4.3.1 -->
<hibernate-mapping>
  <class name="pe.edu.upn.encuesta.entidad.ConsolidadoInputsHost" table="CONSOLIDADO_INPUTS_HOST">
    <id name="id" type="long">
      <column name="ID" precision="10" scale="0"/>
      <generator class="sequence">
        <param name="sequence">SQ_CONSOLIDADO_INPUTS_HOST</param>
      </generator>
    </id>
    <property name="fuente" type="string">
      <column length="10" name="FUENTE">
        <comment>TIPO DE ARCHIVO ANEXO8, ANEXO1, SALDIARIOS,OTROSDISPON</comment>
      </column>
    </property>
    <property name="cuentaContable" type="string">
      <column length="20" name="CUENTA_CONTABLE">
        <comment>Cuenta Contable informada para el aplicativo HOST</comment>
      </column>
    </property>
    <property name="descripcion" type="string">
      <column length="50" name="DESCRIPCION">
        <comment>Breve descripci√≥n del registro</comment>
      </column>
    </property>
    <property name="saldo" type="big_decimal">
      <column name="SALDO" precision="18">
        <comment>SALDO DEL REGISTRO</comment>
      </column>
    </property>
    <property name="divisa" type="string">
      <column length="3" name="DIVISA">
        <comment>TIPO DE MONEDA PEN USD EUR</comment>
      </column>
    </property>
    <property name="codigoCentral" type="string">
      <column length="8" name="CODIGO_CENTRAL">
        <comment>CODIGO DEL CLIENTE</comment>
      </column>
    </property>
    <property name="doi" type="string">
      <column length="11" name="DOI">
        <comment>DOCIMENTO DE INDENTIDAD JURIDICA PERSONA NATURAL</comment>
      </column>
    </property>
    <property name="periodo" type="date">
      <column length="7" name="PERIODO">
        <comment>PERIODO</comment>
      </column>
    </property>
    <property name="cuentaContableArchmodel" type="string">
      <column length="20" name="CUENTA_CONTABLE_ARCHMODEL">
        <comment>Cuenta Contable Formato Archivo Modelo</comment>
      </column>
    </property>
  </class>
  <sql-query name="resumen">
        <return alias="consolidadoInpusHost" class="com.bbva.balsec.entidad.ConsolidadoInputsHost"/>
        SELECT
              to_number(A.CUENTA_CONTABLE) {consolidadoInpusHost.id}
            , NULL {consolidadoInpusHost.fuente}
            , A.CUENTA_CONTABLE {consolidadoInpusHost.cuentaContable}
            , A.DESCRIPCION {consolidadoInpusHost.descripcion}
            , SUM(consolidadoInpusHost.SALDO) {consolidadoInpusHost.saldo}
            , NULL {consolidadoInpusHost.divisa}
            , NULL {consolidadoInpusHost.codigoCentral}
            , NULL {consolidadoInpusHost.doi}
            , :P_PERIODO {consolidadoInpusHost.periodo}
            , NULL {consolidadoInpusHost.cuentaContableArchmodel}
        FROM BALSEC.CONSOLIDADO_INPUTS_HOST consolidadoInpusHost 
            INNER JOIN BALSEC.TEMP_ARCHIVO_MODELO_INPUTS A ON A.CUENTA_CONTABLE_ORIGEN = consolidadoInpusHost.CUENTA_CONTABLE
        WHERE consolidadoInpusHost.PERIODO = :P_PERIODO
        AND consolidadoInpusHost.FUENTE = :P_FUENTE
        AND A.OPCION = 1
        GROUP BY A.DESCRIPCION, A.CUENTA_CONTABLE
        ORDER BY substr(A.CUENTA_CONTABLE,1,2) || '0' ||
			      rpad(substr(A.CUENTA_CONTABLE,4,LENGTH(A.CUENTA_CONTABLE)),15,'0') ASC,
			      substr(A.CUENTA_CONTABLE,3,1) asc
    </sql-query>
</hibernate-mapping>
